(function (e, t, n) { function r(t) { if (!Y) { $ = t, o(e.extend(U, e.data($, c))), O = e($), J = 0, U.rel !== "nofollow" && (O = e("." + et).filter(function () { var t = e.data(this, c).rel || this.rel; return t === U.rel }), J = O.index($), J === -1 && (O = O.add($), J = O.length - 1)); if (!Q) { Q = G = !0, x.show(); if (U.returnFocus) try { $.blur(), e($).one(g, function () { try { this.focus() } catch (e) { } }) } catch (n) { } S.css({ opacity: +U.opacity, cursor: U.overlayClose ? "pointer" : "auto" }).show(), U.w = a(U.initialWidth, "x"), U.h = a(U.initialHeight, "y"), Z.position(0), w && M.bind("resize." + E + " scroll." + E, function () { S.css({ width: M.width(), height: M.height(), top: M.scrollTop(), left: M.scrollLeft() }) }).trigger("resize." + E), s(p, U.onOpen), R.add(H).hide(), q.html(U.close).show() } Z.load(!0) } } function i() { var e, t = h + "Slideshow_", n = "click." + h, r, i, s; U.slideshow && O[1] && (r = function () { j.text(U.slideshowStop).unbind(n).bind(v, function () { if (J < O.length - 1 || U.loop) e = setTimeout(Z.next, U.slideshowSpeed) }).bind(d, function () { clearTimeout(e) }).one(n + " " + m, i), x.removeClass(t + "off").addClass(t + "on"), e = setTimeout(Z.next, U.slideshowSpeed) }, i = function () { clearTimeout(e), j.text(U.slideshowStart).unbind([v, d, m, n].join(" ")).one(n, r), x.removeClass(t + "on").addClass(t + "off") }, U.slideshowAuto ? r() : i()) } function s(t, n) { n && n.call($), e.event.trigger(t) } function o(t) { for (var n in t) e.isFunction(t[n]) && n.substring(0, 2) !== "on" && (t[n] = t[n].call($)); t.rel = t.rel || $.rel || "nofollow", t.href = e.trim(t.href || e($).attr("href")), t.title = t.title || $.title } function u(e) { return U.photo || /\.(gif|png|jpg|jpeg|bmp)(?:\?([^#]*))?(?:#(\.*))?$/i.test(e) } function a(e, t) { t = t === "x" ? M.width() : M.height(); return typeof e == "string" ? Math.round(/%/.test(e) ? t / 100 * parseInt(e, 10) : parseInt(e, 10)) : e } function f(n, r) { var i = t.createElement("div"); n && (i.id = h + n), i.style.cssText = r || !1; return e(i) } var l = { transition: "elastic", speed: 300, width: !1, initialWidth: "600", innerWidth: !1, maxWidth: !1, height: !1, initialHeight: "450", innerHeight: !1, maxHeight: !1, scalePhotos: !0, scrolling: !0, inline: !1, html: !1, iframe: !1, fastIframe: !0, photo: !1, href: !1, title: !1, rel: !1, opacity: .9, preloading: !0, current: "image {current} of {total}", previous: "previous", next: "next", close: "close", open: !1, returnFocus: !0, loop: !0, slideshow: !1, slideshowAuto: !0, slideshowSpeed: 2500, slideshowStart: "start slideshow", slideshowStop: "stop slideshow", onOpen: !1, onLoad: !1, onComplete: !1, onCleanup: !1, onClosed: !1, overlayClose: !0, escKey: !0, arrowKey: !0 }, c = "colorbox", h = "cbox", p = h + "_open", d = h + "_load", v = h + "_complete", m = h + "_cleanup", g = h + "_closed", y = h + "_purge", b = e.browser.msie && !e.support.opacity, w = b && e.browser.version < 7, E = h + "_IE6", S, x, T, N, C, k, L, A, O, M, _, D, P, H, B, j, F, I, q, R, U = {}, z, W, X, V, $, J, K, Q, G, Y = !1, Z, et = h + "Element"; Z = e.fn[c] = e[c] = function (t, n) { var i = this, s; if (!i[0] && i.selector) return i; t = t || {}, n && (t.onComplete = n); if (!i[0] || i.selector === undefined) i = e("<a/>"), t.open = !0; i.each(function () { e.data(this, c, e.extend({}, e.data(this, c) || l, t)), e(this).addClass(et) }), s = t.open, e.isFunction(s) && (s = s.call(i)), s && r(i[0]); return i }, Z.init = function () { M = e(n), x = f().attr({ id: c, "class": b ? h + (w ? "IE6" : "IE") : "" }), S = f("Overlay", w ? "position:absolute" : "").hide(), T = f("Wrapper"), N = f("Content").append(_ = f("LoadedContent", "width:0; height:0; overflow:hidden"), P = f("LoadingOverlay").add(f("LoadingGraphic")), H = f("Title"), B = f("Current"), F = f("Next"), I = f("Previous"), j = f("Slideshow").bind(p, i), q = f("Close")), T.append(f().append(f("TopLeft"), C = f("TopCenter"), f("TopRight")), f(!1, "clear:left").append(k = f("MiddleLeft"), N, L = f("MiddleRight")), f(!1, "clear:left").append(f("BottomLeft"), A = f("BottomCenter"), f("BottomRight"))).children().children().css({ "float": "left" }), D = f(!1, "position:absolute; width:9999px; visibility:hidden; display:none"), e("body").prepend(S, x.append(T, D)), N.children().hover(function () { e(this).addClass("hover") }, function () { e(this).removeClass("hover") }).addClass("hover"), z = C.height() + A.height() + N.outerHeight(!0) - N.height(), W = k.width() + L.width() + N.outerWidth(!0) - N.width(), X = _.outerHeight(!0), V = _.outerWidth(!0), x.css({ "padding-bottom": z, "padding-right": W }).hide(), F.click(function () { Z.next() }), I.click(function () { Z.prev() }), q.click(function () { Z.close() }), R = F.add(I).add(B).add(j), N.children().removeClass("hover"), e("." + et).live("click", function (e) { e.button !== 0 && typeof e.button != "undefined" || e.ctrlKey || e.shiftKey || e.altKey || (e.preventDefault(), r(this)) }), S.click(function () { U.overlayClose && Z.close() }), e(t).bind("keydown." + h, function (e) { var t = e.keyCode; Q && U.escKey && t === 27 && (e.preventDefault(), Z.close()), Q && U.arrowKey && O[1] && (t === 37 ? (e.preventDefault(), I.click()) : t === 39 && (e.preventDefault(), F.click())) }) }, Z.remove = function () { x.add(S).remove(), e("." + et).die("click").removeData(c).removeClass(et) }, Z.position = function (e, n) { function r(e) { C[0].style.width = A[0].style.width = N[0].style.width = e.style.width, P[0].style.height = P[1].style.height = N[0].style.height = k[0].style.height = L[0].style.height = e.style.height } var i, s = Math.max(t.documentElement.clientHeight - U.h - X - z, 0) / 2 + M.scrollTop(), o = Math.max(M.width() - U.w - V - W, 0) / 2 + M.scrollLeft(); i = x.width() === U.w + V && x.height() === U.h + X ? 0 : e, T[0].style.width = T[0].style.height = "9999px", x.dequeue().animate({ width: U.w + V, height: U.h + X, top: s, left: o }, { duration: i, complete: function () { r(this), G = !1, T[0].style.width = U.w + V + W + "px", T[0].style.height = U.h + X + z + "px", n && n() }, step: function () { r(this) } }) }, Z.resize = function (e) { if (Q) { e = e || {}, e.width && (U.w = a(e.width, "x") - V - W), e.innerWidth && (U.w = a(e.innerWidth, "x")), _.css({ width: U.w }), e.height && (U.h = a(e.height, "y") - X - z), e.innerHeight && (U.h = a(e.innerHeight, "y")); if (!e.innerHeight && !e.height) { var t = _.wrapInner("<div style='overflow:auto'></div>").children(); U.h = t.height(), t.replaceWith(t.children()) } _.css({ height: U.h }), Z.position(U.transition === "none" ? 0 : U.speed) } }, Z.prep = function (t) { function n(t) { Z.position(t, function () { var t, n, r, i, a = O.length, f, l; !Q || (l = function () { P.hide(), s(v, U.onComplete) }, b && K && _.fadeIn(100), H.html(U.title).add(_).show(), a > 1 ? (typeof U.current == "string" && B.html(U.current.replace(/\{current\}/, J + 1).replace(/\{total\}/, a)).show(), F[U.loop || J < a - 1 ? "show" : "hide"]().html(U.next), I[U.loop || J ? "show" : "hide"]().html(U.previous), t = J ? O[J - 1] : O[a - 1], r = J < a - 1 ? O[J + 1] : O[0], U.slideshow && j.show(), U.preloading && (i = e.data(r, c).href || r.href, n = e.data(t, c).href || t.href, i = e.isFunction(i) ? i.call(r) : i, n = e.isFunction(n) ? n.call(t) : n, u(i) && (e("<img/>")[0].src = i), u(n) && (e("<img/>")[0].src = n))) : R.hide(), U.iframe ? (f = e("<iframe/>").addClass(h + "Iframe")[0], U.fastIframe ? l() : e(f).load(l), f.name = h + +(new Date), f.src = U.href, U.scrolling || (f.scrolling = "no"), b && (f.frameBorder = 0, f.allowTransparency = "true"), e(f).appendTo(_).one(y, function () { f.src = "//about:blank" })) : l(), U.transition === "fade" ? x.fadeTo(o, 1, function () { x[0].style.filter = "" }) : x[0].style.filter = "", M.bind("resize." + h, function () { Z.position(0) })) }) } function r() { U.h = U.h || _.height(), U.h = U.mh && U.mh < U.h ? U.mh : U.h; return U.h } function i() { U.w = U.w || _.width(), U.w = U.mw && U.mw < U.w ? U.mw : U.w; return U.w } if (!!Q) { var o = U.transition === "none" ? 0 : U.speed; M.unbind("resize." + h), _.remove(), _ = f("LoadedContent").html(t), _.hide().appendTo(D.show()).css({ width: i(), overflow: U.scrolling ? "auto" : "hidden" }).css({ height: r() }).prependTo(N), D.hide(), e(K).css({ "float": "none" }), w && e("select").not(x.find("select")).filter(function () { return this.style.visibility !== "hidden" }).css({ visibility: "hidden" }).one(m, function () { this.style.visibility = "inherit" }), U.transition === "fade" ? x.fadeTo(o, 0, function () { n(0) }) : n(o) } }, Z.load = function (t) { var n, r, i = Z.prep; G = !0, K = !1, $ = O[J], t || o(e.extend(U, e.data($, c))), s(y), s(d, U.onLoad), U.h = U.height ? a(U.height, "y") - X - z : U.innerHeight && a(U.innerHeight, "y"), U.w = U.width ? a(U.width, "x") - V - W : U.innerWidth && a(U.innerWidth, "x"), U.mw = U.w, U.mh = U.h, U.maxWidth && (U.mw = a(U.maxWidth, "x") - V - W, U.mw = U.w && U.w < U.mw ? U.w : U.mw), U.maxHeight && (U.mh = a(U.maxHeight, "y") - X - z, U.mh = U.h && U.h < U.mh ? U.h : U.mh), n = U.href, P.show(), U.inline ? (f().hide().insertBefore(e(n)[0]).one(y, function () { e(this).replaceWith(_.children()) }), i(e(n))) : U.iframe ? i(" ") : U.html ? i(U.html) : u(n) ? (e(K = new Image).addClass(h + "Photo").error(function () { U.title = !1, i(f("Error").text("This image could not be loaded")) }).load(function () { var e; K.onload = null, U.scalePhotos && (r = function () { K.height -= K.height * e, K.width -= K.width * e }, U.mw && K.width > U.mw && (e = (K.width - U.mw) / K.width, r()), U.mh && K.height > U.mh && (e = (K.height - U.mh) / K.height, r())), U.h && (K.style.marginTop = Math.max(U.h - K.height, 0) / 2 + "px"), O[1] && (J < O.length - 1 || U.loop) && (K.style.cursor = "pointer", K.onclick = function () { Z.next() }), b && (K.style.msInterpolationMode = "bicubic"), setTimeout(function () { i(K) }, 1) }), setTimeout(function () { K.src = n }, 1)) : n && D.load(n, function (t, n, r) { i(n === "error" ? f("Error").text("Request unsuccessful: " + r.statusText) : e(this).contents()) }) }, Z.next = function () { !G && O[1] && (J < O.length - 1 || U.loop) && (J = J < O.length - 1 ? J + 1 : 0, Z.load()) }, Z.prev = function () { !G && O[1] && (J || U.loop) && (J = J ? J - 1 : O.length - 1, Z.load()) }, Z.close = function () { Q && !Y && (Y = !0, Q = !1, s(m, U.onCleanup), M.unbind("." + h + " ." + E), S.fadeTo(200, 0), x.stop().fadeTo(300, 0, function () { x.add(S).css({ opacity: 1, cursor: "auto" }).hide(), s(y), _.remove(), setTimeout(function () { Y = !1, s(g, U.onClosed) }, 1) })) }, Z.element = function () { return e($) }, Z.settings = l, e(Z.init) })(jQuery, document, this)