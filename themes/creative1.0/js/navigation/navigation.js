(function(e){e.fn.dcMegaMenu=function(t){var n={classParent:"dc-mega",classContainer:"sub-container",classSubParent:"mega-hdr",classSubLink:"mega-hdr",classWidget:"dc-extra",rowItems:5,speed:"slow",effect:"fade",event:"hover",fullWidth:false,onLoad:function(){},beforeOpen:function(){},beforeClose:function(){}};var t=e.extend(n,t);var r=this;return r.each(function(t){function f(){var t=e(".sub",this);e(this).addClass("mega-hover");if(n.effect=="fade"){e(t).fadeIn(n.speed)}if(n.effect=="slide"){e(t).show(n.speed)}n.beforeOpen.call(this)}function l(t){var r=e(".sub",t);e(t).addClass("mega-hover");if(n.effect=="fade"){e(r).fadeIn(n.speed)}if(n.effect=="slide"){e(r).show(n.speed)}n.beforeOpen.call(this)}function c(){var t=e(".sub",this);e(this).removeClass("mega-hover");e(t).hide();n.beforeClose.call(this)}function h(t){var r=e(".sub",t);e(t).removeClass("mega-hover");e(r).hide();n.beforeClose.call(this)}function p(){e("li",r).removeClass("mega-hover");e(".sub",r).hide()}function d(){$arrow='<span class="dc-mega-icon"></span>';var t=o+"-li";var d=r.outerWidth();e("> li",r).each(function(){var f=e("> ul",this);var l=e("> a",this);if(f.length){l.addClass(o).append($arrow);f.addClass("sub").wrap('<div class="'+u+'" />');var c=e(this).position();pl=c.left;if(e("ul",f).length){e(this).addClass(t);e("."+u,this).addClass("mega");e("> li",f).each(function(){if(!e(this).hasClass(a)){e(this).addClass("mega-unit");if(e("> ul",this).length){e(this).addClass(i);e("> a",this).addClass(i+"-a")}else{e(this).addClass(s);e("> a",this).addClass(s+"-a")}}});var h=e(".mega-unit",this);rowSize=parseInt(n.rowItems);for(var p=0;p<h.length;p+=rowSize){h.slice(p,p+rowSize).wrapAll('<div class="row" />')}f.show();var v=e(this).width();var m=pl+v;var g=d-m;var y=f.outerWidth();var b=f.parent("."+u).outerWidth();var w=b-y;if(n.fullWidth==true){var E=d-w;f.parent("."+u).css({width:E+"px"});r.addClass("full-width")}var S=e(".mega-unit",f).outerWidth(true);var x=e(".row:eq(0) .mega-unit",f).length;var T=S*x;var N=T+w;e(".row",this).each(function(){e(".mega-unit:last",this).addClass("last");var t=undefined;e(".mega-unit > a",this).each(function(){var n=parseInt(e(this).height());if(t===undefined||t<n){t=n}});e(".mega-unit > a",this).css("height",t+"px");e(this).css("width",T+"px")});if(n.fullWidth==true){L={left:0}}else{var C=g<C?C+C-g:(N-v)/2;var k=pl-C;var L={left:pl+"px",marginLeft:-C+"px"};if(k<0){L={left:0}}else if(g<C){L={right:0}}}e("."+u,this).css(L);e(".row",f).each(function(){var t=e(this).height();e(".mega-unit",this).css({height:t+"px"});e(this).parent(".row").css({height:t+"px"})});f.hide()}else{e("."+u,this).addClass("non-mega").css("left",pl+"px")}}});var v=e("> li > a",r).outerHeight(true);e("."+u,r).css({top:v+"px"}).css("z-index","1000");if(n.event=="hover"){var m={sensitivity:2,interval:100,over:f,timeout:400,out:c};e("li",r).hoverIntent(m)}if(n.event=="click"){e("body").mouseup(function(t){if(!e(t.target).parents(".mega-hover").length){p()}});e("> li > a."+o,r).click(function(t){var n=e(this).parent();if(n.hasClass("mega-hover")){h(n)}else{l(n)}t.preventDefault()})}n.onLoad.call(this)}var i=n.classSubParent;var s=n.classSubLink;var o=n.classParent;var u=n.classContainer;var a=n.classWidget;d()})}})(jQuery)
