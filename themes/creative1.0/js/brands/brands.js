(function(e){e.fn.extend({jsCarousel:function(t){var n=e.extend({scrollspeed:1e3,delay:5e3,itemstodisplay:7,autoscroll:true,circular:true,masked:true,onthumbnailclick:null,orientation:"h"},t);return this.each(function(){function S(){a=-1;c=parseInt(u/p);if(u%p>0)c++;a=c-1;var t=0;var f=p;var l=false;var h=e("> div",r);e("> div",r).remove();if(n.masked)h.addClass("thumbnail-inactive").hover(function(){e(this).removeClass("thumbnail-inactive").addClass("thumbnail-active")},function(){e(this).removeClass("thumbnail-active").addClass("thumbnail-inactive")});for(var S=0;S<c;S++){if(u>p){t=S*p;f=t+p;if(f>u){t-=f-u;f=t+p;l=true}}else{t=0;f=u}var N=e("<div/>");h.slice(t,f).each(function(t,n){if(!l)N.append(n);else N.append(e(n).clone(true))});N.find("img").click(function(){if(n.onthumbnailclick!=null){n.onthumbnailclick(e(this).attr("src"))}});r.append(N)}if(n.onthumbnailclick!=null)e("> div > div",r).css("cursor","pointer");e("> div",r).addClass("hidden");e("> div > div",r).css("display","");if(n.orientation=="v"){v=e("> div:eq("+a+")",r).css("top");if(v=="auto")v="0px";y=r.height();g=r.get(0).offsetHeight;e("> div",r).css("top","-"+y+"px");e("> div:eq("+a+")",r).stop(false,true).animate({top:v},d,function(){E=false})}if(n.orientation=="h"){m=e("> div:eq("+a+")",r).css("left");b=r.width();g=r.get(0).offsetHeight;e("> div",r).css("left","-"+b+"px");e("> div:eq("+a+")",r).stop(false,true).animate({left:0},d,function(){E=false})}e("> div:eq("+a+")",r).addClass("visible").removeClass("hidden");i.mouseenter(function(){if(n.autoscroll)x()}).mouseleave(function(){if(n.autoscroll)T()});if(n.autoscroll)T();o.click(function(){if(!E){w="forward";if(n.circular)if(a<=0)a=c;k()}});s.click(function(){if(!E){w="backward";if(n.circular)if(a>=c-1)a=-1;k()}})}function x(){E=false;clearTimeout(h);i.children().clearQueue();i.children().stop(false,true)}function T(){clearTimeout(h);if(n.autoscroll)h=setTimeout(N,n.delay)}function N(){if(w=="forward"){if(a<=0)a=c}else{if(a>=c-1){a=-1}}k();h=setTimeout(N,n.delay)}function C(e){return e+"px"}function k(){E=true;var t=e(".visible",r);var i=d;if(w=="forward"){a--;if(a>=0){if(n.orientation=="v"){e(">div:eq("+a+")",r).css("top",C(y)).removeClass("hidden").addClass("visible").stop(false,true).animate({top:v},i,function(){E=false});t.stop(false,true).animate({top:"-="+C(y)},i,function(){e(this).removeClass("visible").addClass("hidden");e(this).css("top",v);E=false})}else{e(">div:eq("+a+")",r).css("left",C(b)).removeClass("hidden").addClass("visible").stop(false,true).animate({left:"-="+C(b)},i,function(){E=false});t.stop(false,true).animate({left:"-="+C(b)},i,function(){e(this).removeClass("visible").addClass("hidden");e(this).css("left",m);E=false})}}else a=0}else if(w=="backward"){a++;if(a<c){if(n.orientation=="v"){e(">div:eq("+a+")",r).removeClass("hidden").addClass("visible").css({top:C(-y)}).stop(false,true).animate({top:v},i,function(){E=false});t.stop(false,true).animate({top:"+="+C(y)},i,function(){e(this).removeClass("visible").addClass("hidden");e(this).css("top",C(-y));E=false})}else{e(">div:eq("+a+")",r).removeClass("hidden").addClass("visible").css({left:C(-b)}).stop(false,true).animate({left:"+="+C(b)},i,function(){E=false});t.stop(false,true).animate({left:"+="+C(b)},i,function(){e(this).removeClass("visible").addClass("hidden");e(this).css("left",C(-b));E=false})}}else a=c-1}}var t="horizontal";if(n.orientation=="v")t="vertical";var r=e(this).addClass("jscarousal-contents-"+t+"");var i=e("<div/>").addClass("jscarousal-"+t+"").attr("id",r.attr("id"));var s=e("<div/>").addClass("jscarousal-"+t+"-back");var o=e("<div/>").addClass("jscarousal-"+t+"-forward");r.removeAttr("id");r.before(i);i.append(s);i.append(r);i.append(o);var u=e("> div",r).css("display","none").length;var a=0;var f=0;var l=e("<div/>");var c;var h;var p=n.itemstodisplay;var d=n.scrollspeed;var v;var m;var g;var y;var b;var w="forward";var E=true;S()})}})})(jQuery)
